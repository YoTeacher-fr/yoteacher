const e=[{id:1,type:"Conversation",typeKey:"courses.conversation",focus:"Discussion uniquement",focusKey:"courses.conversation_focus",price:20,basePriceEUR:20,duration:"60 minutes",features:[{text:"Fluidit√© √† l'oral",key:"courses.feature1"},{text:"Vocabulaire quotidien",key:"courses.feature2"},{text:"Correction en temps r√©el",key:"courses.feature3"},{text:"Sujets vari√©s d'actualit√©",key:"courses.feature4"}],details:[{duration:"30min",durationKey:"courses.detail_30min",price:10,basePriceEUR:10},{duration:"45min",durationKey:"courses.detail_45min",price:15,basePriceEUR:15},{duration:"Forfait 10 cours",durationKey:"courses.detail_forfait",price:190,basePriceEUR:190,discount:"(-5%)",discountKey:"courses.discount"}],buttonText:"R√©server",buttonTextKey:"courses.button_reserve",featured:!1},{id:2,type:"Curriculum Complet",typeKey:"courses.curriculum",focus:"Grammaire, exercices, structure",focusKey:"courses.curriculum_focus",price:40,basePriceEUR:40,duration:"60 minutes",features:[{text:"Grammaire approfondie",key:"courses.feature5"},{text:"Exercices personnalis√©s",key:"courses.feature6"},{text:"Structure compl√®te",key:"courses.feature7"},{text:"Programme sur mesure",key:"courses.feature8"}],details:[{duration:"30min",durationKey:"courses.detail_30min",price:20,basePriceEUR:20},{duration:"45min",durationKey:"courses.detail_45min",price:30,basePriceEUR:30},{duration:"Forfait 10 cours",durationKey:"courses.detail_forfait",price:380,basePriceEUR:380,discount:"(-5%)",discountKey:"courses.discount"}],buttonText:"Choisir ce cours",buttonTextKey:"courses.button_choose",featured:!0},{id:3,type:"Pr√©paration d'examen",typeKey:"courses.exam",focus:"DELF, DALF, TCF",focusKey:"courses.exam_focus",price:30,basePriceEUR:30,duration:"60 minutes",features:[{text:"Simulations d'examen",key:"courses.feature9"},{text:"Correction d√©taill√©e",key:"courses.feature10"},{text:"Strat√©gies de r√©ussite",key:"courses.feature11"},{text:"Feedbacks personnalis√©s",key:"courses.feature12"}],details:[{duration:"30min",durationKey:"courses.detail_30min",price:15,basePriceEUR:15},{duration:"45min",durationKey:"courses.detail_45min",price:22.5,basePriceEUR:22.5},{duration:"Forfait 10 cours",durationKey:"courses.detail_forfait",price:285,basePriceEUR:285,discount:"(-5%)",discountKey:"courses.discount"}],buttonText:"Choisir ce cours",buttonTextKey:"courses.button_reserve",featured:!1}],n=[{id:1,name:"Marina",country:"üá∫üá∏ √âtats-Unis",content:"Yoann est un professeur fantastique ! Ses cours sont dynamiques et il sait vraiment comment me mettre √† l'aise. J'ai fait des progr√®s incroyables en seulement quelques mois.",rating:5,lessons:"142 cours"},{id:2,name:"Kay",country:"üá®üá¶ Canada",content:"J'adore apprendre avec Yoann. Il est patient, professionnel et ses cours sont toujours bien pr√©par√©s. Il s'adapte parfaitement √† mon niveau et mes besoins.",rating:5,lessons:"78 cours"},{id:3,name:"Julia",country:"üáÆüáπ Italie",content:"Les cours avec Yoann sont un vrai plaisir ! Il cr√©e une atmosph√®re d√©tendue o√π je n'ai pas peur de faire des erreurs. Ma confiance en fran√ßais a vraiment augment√©.",rating:5,lessons:"115 cours"},{id:4,name:"Octavi",country:"üá™üá∏ Espagne",content:"Yoann est chaleureux et ouvert d'esprit. Ses voyages dans 75 pays rendent nos conversations tr√®s int√©ressantes. Je recommande vivement !",rating:5,lessons:"56 cours"},{id:5,name:"Nahema",country:"üá¶üá∫ Australie",content:"Gr√¢ce √† Yoann, j'ai r√©ussi mon examen DELF B2 ! Sa m√©thode de pr√©paration est efficace et il sait exactement comment vous pr√©parer au succ√®s.",rating:5,lessons:"24 cours"},{id:6,name:"Chen",country:"üá®üá≥ Chine",content:"Professeur tr√®s professionnel et bienveillant. Il prend le temps d'expliquer la grammaire clairement et les cours sont toujours vivants et dynamiques.",rating:5,lessons:"37 cours"},{id:7,name:"Luca",country:"üá©üá™ Allemagne",content:"Je pr√©pare le DELF B1 avec Yoann et ses conseils sont pr√©cieux. Il conna√Æt parfaitement les exigences de l'examen.",rating:5,lessons:"18 cours"},{id:8,name:"Sofia",country:"üá¶üá∑ Argentine",content:"Les cours avec Yoann sont toujours tr√®s structur√©s et int√©ressants. J'ai beaucoup progress√© en compr√©hension orale.",rating:5,lessons:"32 cours"},{id:9,name:"Yago",country:"üáßüá∑ Br√©sil",content:"Professeur exceptionnel ! Yoann sait s'adapter √† chaque √©l√®ve et rend l'apprentissage du fran√ßais agr√©able.",rating:5,lessons:"25 cours"}];let t={testimonialsLoaded:!1,currentTestimonialSlide:0};function o(e,n){if(console.log("üîç getTranslation appel√© avec key:",e,"et fallback:",n),window.translationManager)if(console.log("‚úÖ translationManager trouv√©:",window.translationManager),console.log("üîç Type de getTranslation:",typeof window.translationManager.getTranslation),"function"==typeof window.translationManager.getTranslation){const n=window.translationManager.getTranslation(e);if(console.log("üåç Traduction obtenue:",n),n&&n!==e)return n}else console.error("‚ùå translationManager.getTranslation n'est pas une fonction"),console.log("üîç translationManager:",window.translationManager);else console.error("‚ùå translationManager non disponible");return console.log("‚Ü©Ô∏è Retour fallback:",n),n}const i={init:()=>{console.log("üìö Initialisation des cours...");const n=document.getElementById("coursesContainer");n?(n.innerHTML="",window.translationManager||console.warn("‚ö†Ô∏è translationManager non disponible, utilisation des textes par d√©faut"),e.forEach(e=>i.createCourseCard(e,n)),i.addCourseEvents(),i.updateCoursePrices(),console.log(`‚úÖ ${e.length} cartes de cours cr√©√©es`)):console.error("‚ùå Conteneur des cours non trouv√©")},createCourseCard:(e,n)=>{const t=document.createElement("div");t.className="course-card "+(e.featured?"featured":""),t.setAttribute("data-course-id",e.id),t.setAttribute("data-base-price",e.basePriceEUR);const i=o(e.typeKey,e.type),r=o(e.focusKey,e.focus),s=o(e.buttonTextKey,e.buttonText),a=o("courses.price_per_hour","/h");let c="";const l=e.details.find(e=>"30min"===e.duration||"courses.detail_30min"===e.durationKey),d=e.details.find(e=>"45min"===e.duration||"courses.detail_45min"===e.durationKey),u=e.details.find(e=>"courses.detail_forfait"===e.durationKey);if(l&&d){const e=o(l.durationKey||"courses.detail_30min","30min"),n=o(d.durationKey||"courses.detail_45min","45min");c=`\n                <div class="price-detail-item" data-base-price-30="${l.basePriceEUR||l.price}" data-base-price-45="${d.basePriceEUR||d.price}">\n                    ${e} : <span class="price-30">${l.price}‚Ç¨</span> ‚îÇ ${n} : <span class="price-45">${d.price}‚Ç¨</span>\n                </div>\n            `}else e.details.forEach(e=>{if("Forfait 10 cours"!==e.duration&&"courses.detail_forfait"!==e.durationKey){const n=o(e.durationKey,e.duration);c+=`\n                        <div class="price-detail-item" data-base-price="${e.basePriceEUR||e.price}">\n                            ${n}: <span class="price-detail">${e.price}‚Ç¨</span>\n                        </div>\n                    `}});if(u){const e=o(u.durationKey,u.duration),n=o(u.discountKey,u.discount);c+=`\n                <div class="price-detail-item" data-base-price-forfait="${u.basePriceEUR||u.price}">\n                    ${e}: <span class="price-forfait">${u.price}‚Ç¨</span> ${n}\n                </div>\n            `}const p=e.features.map(e=>`\n                <div class="course-feature">\n                    <i class="fas fa-check"></i>\n                    <span>${e.key?o(e.key,e.text):e.text}</span>\n                </div>\n            `).join("");let g="";g=3===e.id?`<span class="price-main">${e.price}‚Ç¨<span class="price-per-hour">${a}</span></span>`:`\n                <span class="price-main">${e.price}‚Ç¨<span class="price-per-hour">${a}</span></span>\n            `,t.innerHTML=`\n            <div class="course-header">\n                <div class="course-type">${i}</div>\n                <div class="course-focus">${r}</div>\n            </div>\n            <div class="course-body">\n                <div class="course-price">\n                    ${g}\n                    <div class="price-details">${c}</div>\n                </div>\n                \n                <div class="course-features">\n                    ${p}\n                </div>\n                \n                <button class="btn btn-primary course-book-btn" data-course="${e.id}">\n                    ${s}\n                </button>\n            </div>\n        `,n.appendChild(t)},updateCoursePrices:()=>{if(!window.currencyManager)return void console.log("‚è≥ Gestionnaire de devise non disponible pour mettre √† jour les prix");const e=window.currencyManager.currentCurrency;document.querySelectorAll(".course-card").forEach(e=>{const n=parseFloat(e.dataset.basePrice||"0"),t=e.querySelector(".price-main");if(t&&n>0){const e=window.currencyManager.formatPrice(n);t.querySelector(".price-per-hour")?t.innerHTML=`${e}<span class="price-per-hour">${o("courses.price_per_hour","/h")}</span>`:t.textContent=e}e.querySelectorAll(".price-detail-item").forEach(e=>{let n=0;if(e.hasAttribute("data-base-price-30")){n=parseFloat(e.getAttribute("data-base-price-30"));const t=e.querySelector(".price-30");t&&(t.textContent=window.currencyManager.formatPrice(n));const o=parseFloat(e.getAttribute("data-base-price-45")),i=e.querySelector(".price-45");i&&(i.textContent=window.currencyManager.formatPrice(o))}else if(e.hasAttribute("data-base-price-forfait")){n=parseFloat(e.getAttribute("data-base-price-forfait"));const t=e.querySelector(".price-forfait");t&&(t.textContent=window.currencyManager.formatPrice(n))}else if(e.hasAttribute("data-base-price")){n=parseFloat(e.getAttribute("data-base-price"));const t=e.querySelector(".price-detail");t&&(t.textContent=window.currencyManager.formatPrice(n))}})}),console.log(`‚úÖ Prix des cours mis √† jour en ${e}`)},addCourseEvents:()=>{document.querySelectorAll(".course-book-btn").forEach(n=>{n.addEventListener("click",n=>{const t=n.target.getAttribute("data-course"),o=e.find(e=>e.id==t);if(o){let e="essai";1===o.id&&(e="conversation"),2===o.id&&(e="curriculum"),3===o.id&&(e="examen"),window.location.href=`booking.html?type=${e}`}})}),document.querySelectorAll(".course-card").forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transition="all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)"})})},reloadCourses:()=>{console.log("üîÑ Rechargement des cours avec les nouvelles traductions..."),i.init()}},r={currentSlide:0,slidesPerView:3,init:()=>{console.log("üí¨ Initialisation des t√©moignages...");const e=document.getElementById("testimonialsSlider"),o=document.getElementById("testimonialIndicators");e?(r.currentSlide=0,r.calculateSlidesPerView(),e.innerHTML="",n.forEach((n,t)=>{const o=r.createTestimonialCard(n);e.appendChild(o)}),r.generateIndicators(o),r.addTestimonialEvents(),r.setupNavigation(),r.updateSlider(),t.testimonialsLoaded=!0,console.log(`‚úÖ ${n.length} t√©moignages cr√©√©s, slidesPerView: ${r.slidesPerView}`)):console.error("‚ùå Conteneur des t√©moignages non trouv√©")},calculateSlidesPerView:()=>{const e=window.innerWidth;r.slidesPerView=e>=992?3:e>=768?2:1,console.log(`üì± √âcran: ${e}px, slidesPerView: ${r.slidesPerView}`)},createTestimonialCard:e=>{const n=document.createElement("div");n.className="testimonial-card fade-in-up",n.setAttribute("data-testimonial-id",e.id);const t=o(`testimonial.${e.id}.name`,e.name),i=o(`testimonial.${e.id}.country`,e.country),r=o(`testimonial.${e.id}.content`,e.content),s=o(`testimonial.${e.id}.lessons`,e.lessons);let a="";for(let n=0;n<e.rating;n++)a+='<i class="fas fa-star"></i>';const c=t.charAt(0);return n.innerHTML=`\n            <div class="quote-icon">\n                <i class="fas fa-quote-right"></i>\n            </div>\n            \n            <div class="rating-stars">\n                ${a}\n            </div>\n            \n            <p class="testimonial-content">\n                "${r}"\n            </p>\n            \n            <div class="testimonial-author">\n                <div class="author-avatar">\n                    ${c}\n                </div>\n                <div class="author-info">\n                    <h4>${t}</h4>\n                    <p>${i} ‚Ä¢ ${s}</p>\n                </div>\n            </div>\n        `,n},generateIndicators:e=>{if(!e)return;const t=Math.ceil(n.length/r.slidesPerView);e.innerHTML="";for(let n=0;n<t;n++){const t=document.createElement("button");t.className="testimonial-indicator "+(0===n?"active":""),t.setAttribute("data-slide",n),t.addEventListener("click",()=>{r.goToSlide(n)}),e.appendChild(t)}console.log(`üìä ${t} indicateurs cr√©√©s`)},setupNavigation:()=>{r.removeAllEventListeners();const e=document.getElementById("prevTestimonial"),n=document.getElementById("nextTestimonial");e&&e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),r.prevSlide()}),n&&n.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),r.nextSlide()}),document.addEventListener("keydown",e=>{"ArrowLeft"===e.key?r.prevSlide():"ArrowRight"===e.key&&r.nextSlide()}),window.addEventListener("resize",()=>{const e=r.slidesPerView;r.calculateSlidesPerView(),e!==r.slidesPerView?r.init():r.updateSlider()})},removeAllEventListeners:()=>{const e=document.getElementById("prevTestimonial"),n=document.getElementById("nextTestimonial");if(e){const n=e.cloneNode(!0);e.parentNode.replaceChild(n,e)}if(n){const e=n.cloneNode(!0);n.parentNode.replaceChild(e,n)}document.querySelectorAll(".testimonial-indicator").forEach(e=>{const n=e.cloneNode(!0);e.parentNode.replaceChild(n,e)})},prevSlide:()=>{const e=Math.ceil(n.length/r.slidesPerView);r.currentSlide>0?(r.currentSlide--,r.updateSlider()):(r.currentSlide=e-1,r.updateSlider()),console.log(`‚¨ÖÔ∏è Slide pr√©c√©dente: ${r.currentSlide+1}/${e}`)},nextSlide:()=>{const e=Math.ceil(n.length/r.slidesPerView);r.currentSlide<e-1?(r.currentSlide++,r.updateSlider()):(r.currentSlide=0,r.updateSlider()),console.log(`‚û°Ô∏è Slide suivante: ${r.currentSlide+1}/${e}`)},goToSlide:e=>{const t=Math.ceil(n.length/r.slidesPerView);e>=0&&e<t&&(r.currentSlide=e,r.updateSlider(),console.log(`üéØ Aller √† la slide: ${e+1}/${t}`))},updateSlider:()=>{const e=document.getElementById("testimonialsSlider"),t=document.querySelectorAll(".testimonial-indicator");if(!e)return;const o=e.querySelectorAll(".testimonial-card");o.forEach(e=>{e.style.display="none",e.style.opacity="0",e.style.transform="translateY(20px)"});const i=r.currentSlide*r.slidesPerView,s=Math.min(i+r.slidesPerView,n.length);console.log(`üîÑ Affichage des t√©moignages ${i+1} √† ${s}`);for(let e=i;e<s;e++)o[e]&&(o[e].style.display="block",setTimeout(()=>{o[e].style.opacity="1",o[e].style.transform="translateY(0)",o[e].style.transition="opacity 0.5s ease, transform 0.5s ease"},100*(e-i)));t.forEach((e,n)=>{n===r.currentSlide?e.classList.add("active"):e.classList.remove("active")});const a=document.getElementById("prevTestimonial"),c=document.getElementById("nextTestimonial");Math.ceil(n.length/r.slidesPerView);a&&(a.disabled=!1,a.style.opacity="1",a.style.cursor="pointer"),c&&(c.disabled=!1,c.style.opacity="1",c.style.cursor="pointer")},addTestimonialEvents:()=>{document.querySelectorAll(".testimonial-card").forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-10px) scale(1.02)",this.style.transition="all 0.3s ease",this.style.boxShadow="0 10px 30px rgba(0,0,0,0.15)"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0) scale(1)",this.style.boxShadow="0 5px 15px rgba(0,0,0,0.1)"})})}},s={init:()=>{document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const n=this.getAttribute("href");"#"!==n&&(e.preventDefault(),s.scrollToSection(n))})}),document.querySelectorAll('.btn[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const n=this.getAttribute("href");"#"!==n&&(e.preventDefault(),s.scrollToSection(n))})})},scrollToSection:e=>{const n=document.querySelector(e);if(!n)return;if("#courses"===e)return void setTimeout(()=>{const e=document.querySelector(".courses-container");if(e){const n=e.getBoundingClientRect(),t=window.pageYOffset+n.top-120;window.scrollTo({top:t,behavior:"smooth"})}else window.scrollTo({top:n.offsetTop-150,behavior:"smooth"})},50);window.scrollTo({top:n.offsetTop-100,behavior:"smooth"})}},a={init:()=>{window.addEventListener("scroll",a.handleScroll),a.handleScroll()},handleScroll:()=>{const e=document.querySelector(".main-header"),n=document.querySelector("#about");if(!e)return;const t=n?n.offsetTop:0,o=window.scrollY;o>100||o>=t-100&&o<=t+n.offsetHeight?e.classList.add("scrolled"):e.classList.remove("scrolled")}},c=()=>{const e=document.getElementById("yoannImage");e&&(e.addEventListener("error",()=>{e.src="https://images.unsplash.com/photo-1568602471122-7832951cc4c5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",e.alt="Professeur de fran√ßais"}),e.addEventListener("load",()=>{e.style.opacity="1",e.style.transform="scale(1)"}))},l={init:()=>{l.updateMobileLoginLinks(),window.addEventListener("resize",l.updateMobileLoginLinks),l.checkMobileLayout()},updateMobileLoginLinks:()=>{if(window.innerWidth<=768){const e=document.querySelector(".mobile-login-btn"),n=document.querySelector(".mobile-login-btn-header");if(n&&!window.location.pathname.includes("login.html")){const e=encodeURIComponent(window.location.href);n.href=`login.html?redirect=${e}`}if(e&&!window.location.pathname.includes("login.html")){const n=encodeURIComponent(window.location.href);e.href=`login.html?redirect=${n}`}}},checkMobileLayout:()=>{window.innerWidth<=768?(document.querySelectorAll(".desktop-stat").forEach(e=>{e.style.display="none"}),document.querySelectorAll(".mobile-stat").forEach(e=>{e.style.display="inline"})):(document.querySelectorAll(".desktop-stat").forEach(e=>{e.style.display="inline"}),document.querySelectorAll(".mobile-stat").forEach(e=>{e.style.display="none"}))}},d={init:()=>{console.log("üåç Initialisation du gestionnaire de traduction de l'app..."),window.translationManager?(console.log("‚úÖ TranslationManager principal disponible"),d.translateCourses(),window.addEventListener("language:changed",()=>{console.log("üåç Changement de langue d√©tect√© dans l'app"),r.init(),d.translateCourses()}),console.log(`üåç Langue actuelle: ${window.translationManager.getCurrentLanguage()}`)):console.warn("‚ö†Ô∏è TranslationManager principal non disponible")},translateCourses:()=>{console.log("üåç Traduction des cours dans l'app..."),i.reloadCourses()}};function u(){window.authManager&&!window.authManager._vipPricePatched&&(window.authManager.getVipPrice=async function(e,n){if(!(this.isUserVip()&&window.supabase&&this.user&&this.user.id))return null;try{const{data:t,error:o}=await window.supabase.from("vip_pricing").select("price, currency").eq("user_id",this.user.id).eq("course_type",e).eq("duration_minutes",n).maybeSingle();return o?(console.warn("getVipPrice erreur "+e+" "+n+"min:",o.message),null):t||null}catch(e){return console.warn("Exception getVipPrice:",e),null}},window.authManager._vipPricePatched=!0,console.log("authManager.getVipPrice injecte"))}function p(){window.currencyManager&&!window.currencyManager._vipConvertPatched&&(window.currencyManager.convertVIPPrice=function(e){if(!e||null==e.price)return null;return{display:this.formatPrice(e.price)}},window.currencyManager._vipConvertPatched=!0,console.log("currencyManager.convertVIPPrice injecte"))}const g={init:()=>{console.log("üëë Initialisation du gestionnaire de prix VIP..."),window.addEventListener("vip:loaded",e=>{console.log("üéÅ Prix VIP charg√©s, mise √† jour de l'interface"),g.updateVIPPrices()}),window.addEventListener("currency:changed",()=>{window.authManager&&window.authManager.isUserVip()&&(console.log("üí± Devise chang√©e, mise √† jour des prix VIP"),g.updateVIPPrices())}),window.addEventListener("auth:login",()=>{console.log("üîê Connexion d√©tect√©e"),setTimeout(()=>{window.authManager&&window.authManager.isUserVip()&&(console.log("üëë Utilisateur VIP, chargement des prix"),u(),p(),g.updateVIPPrices())},1500)}),window.addEventListener("auth:logout",()=>{console.log("üîì D√©connexion, r√©initialisation des prix"),i.updateCoursePrices(),g.removeVIPStyles()}),console.log("‚úÖ Gestionnaire de prix VIP initialis√©")},updateVIPPrices:async function(){if(!window.authManager||!window.authManager.isUserVip())return void console.log("üëë Utilisateur non VIP, pas de mise √† jour des prix");console.log("üëë Mise √† jour des prix VIP sur la page d'accueil");const e=document.getElementById("essaiPriceBtn");if(e&&window.currencyManager){const n=e.querySelector(".price-essai");n&&(n.textContent=window.currencyManager.formatPrice(5),console.log("‚úÖ Prix essai mis √† jour"))}const n=[];for(const e of document.querySelectorAll(".course-card")){const t=e.dataset.courseId;if(!t)continue;let i="";switch(t){case"1":i="conversation";break;case"2":i="curriculum";break;case"3":i="examen"}if(!i)continue;console.log(`üîÑ Traitement ${i}...`);const r=await window.authManager.getVipPrice(i,60);if(!r){console.log(`‚ö†Ô∏è Aucun prix VIP pour ${i}`);continue}console.log(`‚úÖ Prix VIP trouv√© pour ${i}:`,r);const s=window.currencyManager.convertVIPPrice(r),a=e.querySelector(".price-main");if(a&&s){a.querySelector(".price-per-hour");const e=o("courses.price_per_hour","/h");let n=s.display;a.innerHTML=`${n}<span class="price-per-hour">${e}</span>`,console.log(`  ‚úÖ Prix principal ${i}: ${n}`)}const c=e.querySelectorAll(".price-detail-item");for(const e of c){const n=e.querySelector(".price-30");if(n){const e=await window.authManager.getVipPrice(i,30);if(e&&window.currencyManager){const t=window.currencyManager.convertVIPPrice(e);n.innerHTML=t.display,console.log(`  ‚úÖ Prix 30min ${i}: ${t.display}`)}}const t=e.querySelector(".price-45");if(t){const e=await window.authManager.getVipPrice(i,45);if(e&&window.currencyManager){const n=window.currencyManager.convertVIPPrice(e);t.innerHTML=n.display,console.log(`  ‚úÖ Prix 45min ${i}: ${n.display}`)}}const o=e.querySelector(".price-forfait");if(o){let e=5;if("conversation"===i){const n=window.packagesManager?.getPackageInfo(i,10);e=n?.discount_percent||5}const n={price:10*r.price*(1-e/100),currency:r.currency};if(window.currencyManager){const t=window.currencyManager.convertVIPPrice(n);o.innerHTML=t.display,console.log(`  ‚úÖ Prix forfait 10 ${i}: ${t.display} (${e}% r√©duction)`)}}if(e.textContent.includes("Forfait 5 cours")){const n=2,t={price:5*r.price*(1-n/100),currency:r.currency};if(window.currencyManager){const n=window.currencyManager.convertVIPPrice(t);(e.querySelector(".price-forfait")||e).innerHTML=n.display+" (-2%)",console.log(`  ‚úÖ Prix forfait 5 ${i}: ${n.display} (2% r√©duction)`)}}}const l=e.querySelector(".course-header");if(l&&!l.querySelector(".vip-badge")){const e=document.createElement("span");e.className="vip-badge",e.textContent="VIP",e.style.cssText="\n                    display: inline-block;\n                    background: linear-gradient(135deg, #FFD700, #FFA500);\n                    color: #000;\n                    padding: 2px 8px;\n                    border-radius: 10px;\n                    font-size: 11px;\n                    font-weight: bold;\n                    margin-left: 10px;\n                    border: 1px solid #FFA500;\n                    vertical-align: middle;\n                ",l.querySelector(".course-type").appendChild(e)}n.push(i)}console.log("‚úÖ Prix VIP mis √† jour pour:",n)},removeVIPStyles:()=>{document.querySelectorAll(".vip-highlight, .vip-price, .vip-badge").forEach(e=>{e.classList.remove("vip-highlight","vip-price"),e.classList.contains("vip-badge")&&e.remove()});const e=document.getElementById("vip-notification");e&&e.remove()}},m=()=>{console.log("üîß Initialisation des boutons de langue...");const e=()=>{if(window.translationManager&&"function"==typeof window.translationManager.toggleLanguage)window.translationManager.toggleLanguage();else{const e="fr"===(document.documentElement.lang||"fr")?"en":"fr";document.documentElement.lang=e,document.querySelectorAll(".language-switcher span:last-child, .mobile-language span:last-child").forEach(n=>{n.textContent="fr"===e?"EN":"FR"}),localStorage.setItem("language",e),window.dispatchEvent(new CustomEvent("language:changed",{detail:{language:e}})),console.log(`üåç Langue bascul√©e vers: ${e} (fallback)`)}},n=document.getElementById("languageSwitcherDesktop");if(n){const t=n.cloneNode(!0);n.parentNode.replaceChild(t,n),t.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),console.log("üåç Clic sur bouton de langue desktop"),e()})}const t=document.getElementById("languageSwitcherMobile");if(t){const n=t.cloneNode(!0);t.parentNode.replaceChild(n,t),n.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),console.log("üåç Clic sur bouton de langue mobile"),e();const t=document.getElementById("mobileMenu");t&&t.classList.contains("active")&&t.classList.remove("active")})}console.log("‚úÖ Boutons de langue initialis√©s")},f={init:()=>{console.log("üöÄ Initialisation de l'application..."),window.addEventListener("beforeunload",()=>{sessionStorage.setItem("scrollPosition",window.scrollY)}),sessionStorage.getItem("scrollPosition")&&window.addEventListener("load",()=>{const e=parseInt(sessionStorage.getItem("scrollPosition"));setTimeout(()=>{window.scrollTo(0,e),sessionStorage.removeItem("scrollPosition")},100)}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",f.setup):f.setup()},setup:()=>{console.log("‚öôÔ∏è Configuration des modules..."),document.body.style.paddingTop="80px";const e=()=>{window.translationManager&&"function"==typeof window.translationManager.getTranslation?(console.log("‚úÖ TranslationManager pr√™t, initialisation des composants..."),console.log("1. Initialisation des cours..."),i.init(),console.log("2. Initialisation des t√©moignages..."),r.init(),console.log("3. Initialisation de la navigation..."),s.init(),console.log("4. Initialisation de l'UI..."),a.init(),console.log("5. Initialisation de l'image..."),c(),console.log("6. Initialisation du mobile..."),l.init(),console.log("7. Initialisation de la traduction de l'app..."),d.init(),console.log("8. Initialisation des prix VIP..."),u(),p(),g.init(),console.log("‚úÖ Application pr√™te !")):(console.log("‚è≥ En attente de translationManager..."),setTimeout(e,100))};e(),window.addEventListener("resize",()=>{r.calculateSlidesPerView(),r.updateSlider(),l.checkMobileLayout()}),window.addEventListener("currency:ready",()=>{i.updateCoursePrices()}),window.addEventListener("currency:changed",()=>{i.updateCoursePrices()}),setTimeout(m,300)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{console.log("üìÑ DOMContentLoaded - Initialisation..."),f.init(),setTimeout(()=>{const e=document.getElementById("coursesContainer"),n=document.getElementById("testimonialsSlider");console.log("üîç V√©rification des conteneurs:"),console.log("- Conteneur cours: "+(e?"TROUV√â":"NON TROUV√â")),console.log("- Conteneur t√©moignages: "+(n?"TROUV√â":"NON TROUV√â")),e&&0===e.children.length&&(console.log("‚ö†Ô∏è Conteneur cours vide, r√©initialisation..."),i.init()),n&&0===n.children.length&&(console.log("‚ö†Ô∏è Conteneur t√©moignages vide, r√©initialisation..."),r.init())},1e3)}):(console.log("üìÑ DOM d√©j√† charg√© - Initialisation..."),f.init()),window.coursesManager=i,window.testimonialsManager=r,window.appTranslationManager=d,window.vipPriceManager=g,console.log("üì¶ Script.js charg√© avec succ√®s");
